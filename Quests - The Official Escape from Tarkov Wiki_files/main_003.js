var et=Object.defineProperty;var tt=(e,t,n)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>tt(e,typeof t!="symbol"?t+"":t,n);const nt="adengadinfo",rt="adengadsizeinfo",ot=e=>e.type==="clicked"||e.type==="force-close";var _e=(e=>(e.BIDDER_RESPONSE="bid_response",e))(_e||{}),J=(e=>(e.ADENGPAGESTATUS="adengpagestatus",e))(J||{}),pe=(e=>(e.IDENTITY_INFO="identity_info",e))(pe||{}),we=(e=>(e.LABRADOR_KEYVALUES="labrador_keyvalues",e))(we||{}),l=(e=>(e.AE_FIRST_LINE_EXEC="ae.firstLineExec",e.AE_AFTER_INIT_PLUGINS="ae.afterInitPlugins",e.AE_AFTER_GPT_WRAPPER_INIT="ae.afterGptWrapperInit",e.AE_AD_ENGINE_INIT="ae.adEngineInit",e.AE_ON_BIDDERS_INIT="ae.onBiddersInit",e.AE_CONFIG_CALLBACK_STARTED="ae.beforeAuction.configCallbackStarted",e.AE_CONFIG_CALLBACK_COMPLETE="ae.beforeAuction.configCallbackComplete",e.AE_AUCTION_START="ae.auctionStart",e.AE_AUCTION_START_A9_START="ae.auctionStart.a9.bidStart",e.AE_AUCTION_END="ae.auctionEnd",e.AE_BEFORE_FIRST_CALL_ADS_REQUEST="ae.beforeFirstCallAdsRequest",e.AE_FIRST_RENDER_CYCLE_COMPLETE="ae.firstRenderCycleComplete",e.AE_GPT_SLOT_REQUESTED_INITIAL="ae.gpt.slotRequested.initial",e.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL="ae.gpt.slotResponseReceived.initial",e.AE_GPT_SLOT_RENDERED_ENDED_INITIAL="ae.gpt.slotRenderEnded.initial",e.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL="ae.gpt.slotOnload.initial",e))(l||{}),V=(e=>(e.AE_AUCTION_DURATION_A9_BID_TOTAL_TIME="ae.d.auctionDuration.a9.bidTotalTime",e.AE_AUCTION_DURATION="ae.d.auctionDuration",e.AE_DURATION_TO_BID="ae.d.firstLineExec_to_auctionStart",e.AE_CONFIG_CALLBACK_DURATION="ae.d.configCallbackDuration",e))(V||{});const M="adengloadtimes";var m=(e=>(e.SLOT_REQUESTED="requested",e.SLOT_RENDERED="rendered",e.AE_INIT="init",e.VENDOR_TIME_UPDATE="vendor_time_update",e.CREATIVE_RENDERED="creative_rendered",e.PERFORMANCE_MARK="performance_mark",e))(m||{}),X=(e=>(e.TRACKING_EVENT="trackingevent",e))(X||{}),Ee=(e=>(e.SHORT_LIVED_TRACKING_EVENT="shortlivedtrackingevent",e))(Ee||{}),he=(e=>(e.COMPONENT_PERFORMANCE_EVENT="component_performance",e))(he||{}),ve=(e=>(e.RECOMMENDATION_EVENT="recommendation",e))(ve||{}),d=(e=>(e.P1="p1",e.P2="p2",e.P3="p3",e.P4="p4",e))(d||{}),Z=(e=>(e.PAGE_LOAD="page_load",e))(Z||{}),O=(e=>(e.YES="yes",e.NO="no",e.NOT_APPLICABLE="",e))(O||{}),Te=(e=>(e.ERROR_NO_TIER_PROVIDED="-2",e.ERROR_DISABLED_TIERS="-1",e.NOT_SUITABLE_FOR_ADVERTISING="2",e.PARTIALLY_MONETIZED="3",e.FULLY_MONETIZED="4",e))(Te||{}),W=(e=>(e.FANDOM_DESKTOP="fandomdesktop",e.FANDOM_MOBILE="fandommobile",e))(W||{});function ke(e){e.cmd??(e.cmd=[]);const t=[...e.cmd];e.cmd.push=(...n)=>{for(const r of n)r(e);return 0};for(const n of t)n(e)}function it(e,t){const n=[...e];e.push=(...r)=>(r.forEach(t),0),n.forEach(t),e.length=0}const st=e=>{const t=("; "+document.cookie).split("; "+e+"=");return t.length>=2?t.pop().split(";").shift():null},be=e=>e!=null&&e.length?` domain=${e};`:"",at=(e,t,n)=>{const r=new Date;r.setTime(r.getTime()+n.expires*1e3),document.cookie=`${e}=${t};${be(n.domain)} path=${n.path}; expires=${r.toUTCString()}`},ct=(e,t)=>{document.cookie=`${e}=;${be(t.domain)} path=${t.path}; expires=Thu, 01 Jan 1970 00:00:00 GMT`},y={set:at,get:st,delete:ct},Se=()=>{const e=window.location.hostname,t=e.split(".");return t.length<2?e:`.${t[t.length-2]}.${t[t.length-1]}`};async function Ie(e,t=1e3,n={}){const r=new AbortController,o=setTimeout(()=>r.abort("The request has timed out"),t),i=await fetch(e,{signal:r.signal,...n});return clearTimeout(o),i}function Ae(e){return new URLSearchParams(window.location.search).get(e)}function ee(e){const t=Ae(e);return dt(e)&&t===""||t==="1"||t==="true"}function dt(e){return new URLSearchParams(window.location.search).has(e)}const te="",Ne=/^(?:(v\d+)-)?(\d{2})$/;function w(){let e=Ae("pf_pathfinder_force_bucket")??y.get("exp_bucket");const t=e==null?void 0:e.match(Ne);return t&&t.length>=3&&(e=t[2]),e??te}function ut(){const t=(y.get("exp_bucket")??"").match(Ne);return t&&t.length>=3&&t[1]?t[1]:te}function gt(){return y.get("exp_bucket_2")??te}function mt(e=window.fandomContext??null){var n;const t=(n=e==null?void 0:e.page)==null?void 0:n.monetizationTier;return typeof t=="number"?t.toString():Te.ERROR_NO_TIER_PROVIDED}const Re=()=>{var e;return window.fandomHost??(window.fandomHost={cmd:[]}),(e=window.fandomHost).cmd??(e.cmd=[]),window.fandomHost};function P(e){Re().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"error"})})}function $(){var e,t,n;return window.fandomTrack??(window.fandomTrack={q:[],cmd:[],registry:{}}),(e=window.fandomTrack).q??(e.q=[]),(t=window.fandomTrack).cmd??(t.cmd=[]),(n=window.fandomTrack).registry??(n.registry={}),window.fandomTrack}function ne(e,t){$().q.push({event:e,payload:t})}function re(e){Re().cmd.push(t=>{t.issueManager.handleIssue({...e,type:"degradation"})})}function lt(e,t){return new Promise((n,r)=>{setTimeout(()=>{let o=`Operation timed out after ${e}ms`;r(new Error(o))},e)})}function ft(e,t,n){const r=lt(t);return Promise.race([e,r])}function _t(e=[],t){const n=e.flat().filter(r=>r.status==="rejected");if(n.length>0){for(const o of n)P({message:"Promise rejected",error:o.reason,priority:d.P3});let r=`${n.length} of ${e.length} promises were rejected.`;P({message:r,priority:d.P3,data:n})}}async function pt(e,t,n){const r=await ft(Promise.allSettled(e),t);return _t(r),r}const de="fandomConsentUpdate",wt=(e=window,t=!0)=>{const n=()=>{var r;return e.fandomCmp!==void 0&&e.fandomCmp.ready&&(t?(r=e.fandomCmp.allowed)==null?void 0:r.ads:!0)};return new Promise(r=>{if(n())return r();const o=()=>{n()&&(e.removeEventListener(de,o),r())};e.addEventListener(de,o)})},ue="fandomContextUpdate",Et=(e=window)=>{const t=()=>{var n;return((n=e.fandomContext)==null?void 0:n.tracking)!==void 0&&e.fandomContext.tracking.pvNumber&&e.fandomContext.tracking.pvNumberGlobal&&e.fandomContext.tracking.pvUID};return new Promise(n=>{if(t())return n();const r=()=>{t()&&(e.removeEventListener(ue,r),n())};e.addEventListener(ue,r)})};function oe(){var t;const e=(t=window.fandomAds)==null?void 0:t.deploymentEnvironment;return e==="production"||e==="canary"||e==="development"?e:"unknown"}const ht=/Mobile|iPhone|Android|Silk|Kindle|Windows Phone|KFAPWI|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,vt=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i,Tt=/iPad|Android(?!.*Mobile)/i,U=()=>{const e=window.navigator.userAgent;return Tt.test(e)?"tablet":ht.test(e)||vt.test(e.substring(0,4))?"smartphone":"desktop"},kt=e=>e.includes("Android")?"Android":"Linux",bt=()=>{const e=window.navigator.userAgent,[t=""]=e.match(/Win|Mac|Linux|Android|like Mac/)??[];switch(t){case"Win":return"Windows";case"Mac":return"OSX";case"Linux":return kt(e);case"Android":return"Android";case"like Mac":return"iOS";default:return"unknown"}},Ce={chrome:void 0,safari:void 0,firefox:void 0,msie:void 0,trident:void 0};function St(e){return e in Ce}function It(e){const t=new RegExp(`(${Object.keys(Ce).join("|")})\\/?\\s*(\\d+)`,"i"),n=e.match(t);if(!n||!n[1]||!n[2])return["",""];const r=n[1].toLowerCase(),o=Number.parseInt(n[2]);return!St(r)||Number.isNaN(o)?["",""]:[r,`${o}`]}function D(e,t){return`${e} ${t}`}function At(e){const t=e.match(/\b(OPR|Edg)\/(\d+)/);if(!t||!t[1]||!t[2])return"";const n=t[1],r=Number.parseInt(t[2]);if(Number.isNaN(r))return"";let o;return n==="OPR"?o="Opera":o="Edge",D(o,`${r}`)}function Nt(e,t){const n=e.match(/version\/(\d+)/i),r=Number.parseInt((n==null?void 0:n[1])??"");return D("Safari",Number.isNaN(r)?t:`${r}`)}function Rt(e,t){return`${e} ${t} -?`}function Oe(){const{appName:e,appVersion:t,userAgent:n}=navigator,[r,o]=It(n);if(!r)return Rt(e,t);switch(r){case"trident":return D("IE","11");case"chrome":return At(n)||D("Chrome",o);case"safari":return Nt(n,o);case"msie":return D("MSIE",o);case"firefox":return D("Firefox",o)}return""}const Ct="https://services.fandom.com/geoip/location",ye=async e=>{const t=e.get("Geo");if(t)try{return JSON.parse(decodeURIComponent(t))}catch(s){P({message:"Error parsing Geo cookie",priority:d.P3,error:s});const c=Se();e.delete("Geo",{domain:c,path:"/"})}const n=await fetch(Ct),{country_code:r,region:o,continent_code:i}=await n.json();return{country:r,region:o,continent:i}},Ot=(e,t)=>{if(!e.get("Geo")){const r=Se();e.set("Geo",encodeURIComponent(JSON.stringify(t)),{domain:r,path:"/",expires:365})}},yt=e=>{const t=Array.isArray(e)?e.map(o=>o&&o.toString().split(":")).filter(o=>o&&o.length>=2).reduce((o,i)=>(o[i[0]]=i[1],o),{}):{},n=o=>o!=null&&o.isActive?o.keyVal:o==null?void 0:o.defaultKeyVal,r=[];return{mark(o){const i=n(o);i&&!r.includes(i)&&r.push(i)},deprecatedMark:(o,i,s)=>{const c=s?i:100-i,u=`${o}_${s?"B":"A"}_${c}`,g=t[u]??u;r.includes(g)||r.push(g)},getLabradorKeyValues:()=>r}},B="non-",j="XX";function Pt(e){return e.startsWith(B)?{value:e.replace(B,""),negated:!0}:{value:e,negated:!1}}function Dt(e,t){return t.some(n=>e.includes(n.value)&&n.negated)}const Lt=e=>{const t=e==null?void 0:e.toLowerCase();return n=>{const o=(n.d??n.devices??[]).map(i=>Pt(i.toLowerCase()));return o.length===0||!t?!0:Dt(t,o)?!1:o.some(i=>i.value===t!==i.negated)}};function xt(e,t,n,r){return e.includes(`${B}${t}`)||e.includes(`${B}${t}-${n}`)||e.includes(`${B}${j}-${r}`)}function Bt(e,t,n,r){return e.includes(j)||e.includes(`${j}-${r}`)||e.includes(t)||e.includes(`${t}-${n}`)}const Mt=e=>{const t=e.country,n=e.region,r=e.continent;return o=>{const i=o.r??o.regions??[];return i.length===0||xt(i,t,n,r)?!1:Bt(i,t,n,r)}},$t=e=>{try{const t=e.localStorage!==void 0&&e.localStorage!==null;return t&&(e.localStorage.setItem("__test__","test"),e.localStorage.removeItem("__test__")),t}catch{return!1}},Ut=(e,t,n)=>{const r=$t(n),o={getItem:a=>r?n.localStorage.getItem(a):null,setItem:(a,u)=>{if(r)return n.localStorage.setItem(a,u)}},i=a=>a?a<Date.now():!0,s=a=>({data:a,ttl:Date.now()+t}),c=a=>i(a.ttl)?null:a.data;return{set:a=>{const u=s(a);o.setItem(e,JSON.stringify(u))},get:()=>{const a=o.getItem(e);return a?c(JSON.parse(a)):null}}};function Vt(e){return{source:e.s,rules:{defaultKeyValue:e.r.k,ranges:e.r.r.map(t=>({start:t.s,end:t.e,keyValue:t.k}))}}}function Ft(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="object"}function Pe(e){const t=e.sampling??e.s;return typeof t=="number"&&t>0&&t<100?t:null}function De(e){return(e==null?void 0:e.bucketing)??((e==null?void 0:e.bu)!==void 0?Vt(e.bu):void 0)}const ge=(e,t,n,r,o,i)=>{const s=e[n];if(Ft(s)){const c=s.find(a=>{const u=t.reduce((x,C)=>x&&C(a),!0),g=De(a);if(g&&i&&u){const C=i(g.source)(a);if(C)return o==null||o.mark(C),C.isActive}const E=Pe(a);if(E===null||!u||!r)return u;const L=r(a);return o&&o.deprecatedMark(n,E,L),L});return(c==null?void 0:c.v)??(c==null?void 0:c.value)}return s},zt=async(e,t)=>{const n=e.instantConfig;if(n)return n;const r=`https://services.fandom.com/icbm/api/config?app=${t}&compact=true`,o=`https://script.wikia.nocookie.net/fandom-ae-assets/icbm/prod/icbm_state_${t}.json`,i=Ut(`instant-config-${t}`,6e4,e),s=await Gt(r,i)??await Le(o)??{};return e.instantConfig=s,s},Gt=async(e,t)=>{const n=t.get();if(n)return JSON.parse(n);const r=await Le(e);return r&&t.set(JSON.stringify(r)),r},Le=async e=>{try{const t=await Ie(e,2e3);return t.ok?t.json():void 0}catch{return}},Ht=e=>t=>{const n=Pe(t);if(n===null)return!0;const r=Math.round(e()),o=Math.round(n);return r<o},xe=e=>{var n;const t=Number(((n=e.fandomContext)==null?void 0:n.experimentBucket)??y.get("eb")??Math.floor(Math.random()*100));return e.fandomContext=e.fandomContext||{},e.fandomContext.experimentBucket=t,()=>t},qt=()=>Number(w()),me=e=>t=>{var i;const n=De(t);if(!((i=n==null?void 0:n.rules)!=null&&i.ranges))return;const r=Math.round(e()),o=n.rules.ranges.find(s=>r>=s.start&&r<=s.end);return{isActive:!!o,defaultKeyVal:n.rules.defaultKeyValue,keyVal:o==null?void 0:o.keyValue}};function Kt(e){return t=>{switch(t){case"eb":return me(xe(e));case"exp_bucket":return me(qt);default:throw new Error(`Unknown bucketing source: ${t}`)}}}const Wt=({device:e,geo:t})=>[Lt(e),Mt(t)];function jt(e){if(e==="true"||e==="false")return e==="true";const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch{return e}}function Qt(e,t){return[...t.keys()].filter(n=>n.startsWith("icbm__")&&t.get(n)!==null).map(n=>{const[,r]=n.split("__");return{key:r,value:jt(t.get(n))}}).reduce((n,{key:r,value:o})=>({...n,[r]:o}),e)}const Yt=async(e,t)=>{const n=await zt(t,e);return Qt(n,new URLSearchParams(t.location.search))},Jt=(e,t,n)=>{const r=Ht(xe(n)),o=yt(ge(e,t,"icLABradorGamKeyValues")),i=Kt(n);return{config:Object.keys(e).reduce((c,a)=>(c[a]=ge(e,t,a,r,o,i),c),{}),activeLabradorKeyValues:o.getLabradorKeyValues()}},Xt={icPrebidIntentIQTimeout:500,icPrebidIntentIQVersion:"6.06-20240711",icPreferredCMP:"onetrust",icAdEngineWaitBeforeFirstAdsRequestMS:0,icAdEngineAuctionTimeoutMS:1500,icAdEngineOnCreateBiddersRequestsTimeoutMS:1510,icAdEngineBidderInitTimeoutMS:1005,icPrebidConfigUpdateTimeoutMS:1e3,icPrebidConsentManagementTimeoutMS:1500,icPrebidInitTimeoutMS:500},Zt=async(e,t,n)=>{const r=await Yt(e,n);return Jt(r,t,n)};async function en(e,t,n){const r=Wt({device:t,geo:n}),{config:o,activeLabradorKeyValues:i}=await Zt(e,r,window);return{config:{...Xt,...o},activeLabradorKeyValues:i}}const tn=()=>!0,Q=(e,t,n={})=>{var s;const r=(s=$().registry)[e]??(s[e]=[]),o={sampling:n.sampling??tn,requiresConsent:n.requiresConsent??!0},i=Object.assign(t,o);r.includes(i)||r.push(i)};function nn(){var e,t,n;return((e=window.fandomCmp)==null?void 0:e.ready)===!0&&((t=window.fandomCmp)==null?void 0:t.allowed.ads)===!0&&((n=window.fandomCmp)==null?void 0:n.optOut)===!1}function ie(e,t){return nn()?e():t}const rn=4e3,Be="opted-out",on=-1;function sn(e){switch(e){case W.FANDOM_DESKTOP:return"ucp_desktop";case W.FANDOM_MOBILE:return"ucp_mobile";default:return e}}function v(){return ie(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.sessionId)??"unknown"},Be)}function S(){return ie(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.beaconId)??"unknown"},Be)}function I(){return ie(()=>{var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.userId)??0},on)}function A(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumber)??-1}function N(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvNumberGlobal)??-1}function _(){var e,t;return window.pvUID??((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.pvUID)??"unknown"}function Me(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.tracking)==null?void 0:t.ppid)??"unknown"}function T(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteId)??-1}function b(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.site)==null?void 0:t.siteName)??"unknown"}function h(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.lang)??"unknown"}function R(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.articleId)??-1}function an(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.monetizationTier)??-2}function p(){var e,t;return sn(((t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.platform)??"unknown")??"unknown"}function $e(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.page)==null?void 0:t.pageType)??"unknown"}function se(){var e;return((e=window.RLCONF)==null?void 0:e.wgNamespaceNumber)??-1}function cn(){var e;return((e=window.RLCONF)==null?void 0:e.wgWikiaEnvironment)??"unknown"}function dn(){var e,t;return((t=(e=window.fandomContext)==null?void 0:e.targeting)==null?void 0:t.brand)??"unknown"}function un(){return`${dn()}-${p()}`}function gn(){return typeof performance<"u"&&typeof performance.now=="function"?Math.round(performance.now()):-1}function ae(){return`${bt()} ${Oe()}`}const mn="1.0.0";function Ue(){return mn}function ln(){return{pv_unique_id:_(),exp_bucket:w(),exp_bucket_v:ut(),exp_bucket_2:gt(),n:se(),c:T(),a:R(),r:document.referrer,lc:h(),env:cn(),tsto:gn(),tlv:Ue(),src:un()}}const fn=({payload:e},t)=>{t("pageload",e)},_n=({event:e,payload:t},n)=>{const r={s:pn(),...t,u:I(),beacon:S(),session_id:v(),pv_unique_id:_(),tlv:Ue()};n(e,r)};function pn(){return`ucp_${U()==="smartphone"?"mobile":"desktop"}`}const wn=()=>{Q(Z.PAGE_LOAD,fn,{requiresConsent:!1}),Q(Ee.SHORT_LIVED_TRACKING_EVENT,_n)};function En(){return"https://beacon.wikia-services.com/__track/special/"}const Ve=(e,t,n)=>{const r=new URL(e);Object.entries(t).forEach(([o,i])=>{r.searchParams.set(o,String(i))}),Ie(r.toString(),rn,{mode:"no-cors"}).catch(o=>P({message:(n==null?void 0:n.errorMessage)??"Failed to send tracking request",priority:d.P4,error:o}))},hn=(e,t)=>{const n=`${En()}${e}`;Ve(n,t,{errorMessage:"Failed to send request to Beacon service"})},vn=e=>{let t;return()=>(t!==void 0||(t=Math.random()*100<e),t)};function Tn(){wn(),ne(Z.PAGE_LOAD,ln())}function kn(){return"v159"}function bn(e){return e.type==="error"}function Sn(e){return e.type==="degradation"}const le=e=>{const t=/(\d+)$/.exec(e);return t?Number(t[1]):Number.POSITIVE_INFINITY};function In(e,t){return le(e)<=le(t)}function An(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.opts)==null?void 0:n.noAdsReasons)??[]}function Nn(e){return e.type===void 0&&(console.warn("Invalid usage of issue, the issue type is missing",e),e.type="error"),{type:e.type,timestamp:new Date,performanceMark:e.performanceMark??performance.mark(e.message),error:void 0,inPageStatus:!1,...e,data:e.data}}const Rn=new Map([[d.P1,"fatal"],[d.P2,"error"],[d.P3,"warning"],[d.P4,"log"]]);function Cn(){return new Promise(e=>{window.fandomSentry?e(window.fandomSentry):window.addEventListener("fandomSentryLoaded",()=>{e(window.fandomSentry)})})}async function On(e){(await Cn()).withScope(n=>{var r;n.setTag("Environment",oe()),n.setTag("priority",e.priority),n.setTag("adengpagestatus",e.inPageStatus?"true":"false"),n.setTag("configVersion",((r=window.fandomAdsSlotsConfig)==null?void 0:r.version)??"unknown"),n.setLevel(yn(e.priority)),n.setTransactionName(Pn(e)),n.captureException(e.error)})}function yn(e){return Rn.get(e)??"error"}function Pn(e){let t="no error";return e.error instanceof Error&&(t=`${e.error.name} - ${e.message}`),`[${e.priority} ${e.type}] ${e.message} (${t})`}const H={error:{p1:1,p2:.5,p3:0,p4:0},degradation:{p1:1,p2:.1,p3:0,p4:0}};class Dn{constructor(t={}){f(this,"sentrySampleSettings");f(this,"queryOverride");this.sentrySampleSettings=this.mergeSampleSettings(t.sentrySampleOverrides),this.queryOverride=ee("force_sentry_send")}mergeSampleSettings(t){try{const n=oe(),{error:r={},degradation:o={}}=(t==null?void 0:t[n])??{};return{error:{...H.error,...r},degradation:{...H.degradation,...o}}}catch(n){return P({priority:d.P3,message:"Error merging sample settings in SentryManager",error:n}),H}}shouldSendToSentry(t){if(this.queryOverride)return!0;if(t.inPageStatus===!1)return!1;const n=this.sentrySampleSettings[t.type][t.priority];return Math.random()<n}handleIssue(t){this.shouldSendToSentry(t)&&On(t)}}const z=class z{constructor(t){f(this,"errorLog",[]);f(this,"degradationLog",[]);f(this,"cleanups",[]);f(this,"logPrefix","[Odyssey]");f(this,"eventSent",!1);f(this,"minLoggingLevel");f(this,"sentryManager");var n;this.minLoggingLevel=t.minLoggingLevel??d.P2;try{this.sentryManager=new Dn({sentrySampleOverrides:(n=window.icbm)==null?void 0:n.config.icSentrySampleOverrides}),this.sendOnSchedule(),this.sendOnPageHidden()}catch(r){console.error(`${this.logPrefix} IssueManager had a failure while initializing:`,r)}}sendOnSchedule(){if(this.eventSent)return;const t=setTimeout(()=>{this.eventSent||this.triggerPageStatus({trigger:"timeout"})},z.PAGE_STATUS_TIMEOUT_MS);this.cleanups.push(()=>clearTimeout(t))}sendOnPageHidden(){if(this.eventSent)return;const t=()=>{this.eventSent||document.visibilityState==="hidden"&&this.triggerPageStatus({trigger:"page_hidden"})};document.addEventListener("visibilitychange",t),this.cleanups.push(()=>document.removeEventListener("visibilitychange",t))}triggerPageStatus(t){this.eventSent||(this.eventSent=!0,this.cleanups.forEach(n=>n()),this.sendPageStatus(t))}handleIssue(t){var r;const n=Nn(t);this.printIssue(t),Sn(n)?this.handleDegradation(n):bn(n)&&this.handleError(n),n.inPageStatus=!this.eventSent,(r=this.sentryManager)==null||r.handleIssue(n)}handleDegradation(t){this.degradationLog.push(t)}handleError(t){this.errorLog.push(t)}printIssue(t){In(t.priority,this.minLoggingLevel)&&console.warn(`${this.logPrefix} [${t.priority}]: ${t.message}`,t.error,t.data)}errorCount(t){return this.errorLog.filter(n=>n.priority===t).length}degradationCount(t){return this.degradationLog.filter(n=>n.priority===t).length}sendPageStatus(t){const n=t.trigger!=="no_ads",r={event:J.ADENGPAGESTATUS,payload:{deploymentEnvironment:oe(),eventTrigger:t.trigger,errors:{p1:this.errorCount(d.P1),p2:this.errorCount(d.P2),p3:this.errorCount(d.P3),p4:this.errorCount(d.P4)},degradations:{p1:this.degradationCount(d.P1),p2:this.degradationCount(d.P2),p3:this.degradationCount(d.P3),p4:this.degradationCount(d.P4)},monetizationStatus:n?"ads":"no_ads",monetizationReasons:n?[]:An(),monetizationTier:mt(),statusChecks:{firstAuctionTimedOut:!1,helixTargetingIncluded:!0}}};return ne(r.event,r.payload),r}reset(){for(const t of this.cleanups)t();this.cleanups.length=0,this.errorLog.length=0,this.degradationLog.length=0,this.eventSent=!1;try{this.sendOnSchedule(),this.sendOnPageHidden()}catch(t){this.handleError({message:"IssueManager: error during reset re-initialization",priority:d.P3,error:t,type:"error"})}}};f(z,"PAGE_STATUS_TIMEOUT_MS",3e4);let Y=z;class Ln{constructor(){f(this,"adBlockDataPromise",Promise.withResolvers());this.runInitChecks()}adBlockSuspected(t){this.updateWindow(t.suspected,[t.reason])}async runInitChecks(){let t=[];try{t=await pt([this.checkForScriptBlock("gumgum","https://g2.gumgum.com/hbid/imp?displaymanager=Prebid.js")],5e3)}catch{t=[{status:"fulfilled",value:{suspected:!0,reason:"initCheckTimeout"}}]}let n=!1;const r=[];for(const o of t)o.status==="fulfilled"?o.value.suspected&&(n=!0,r.push(o.value.reason)):re({message:"Error running an AdBlockManager check",priority:d.P3});this.updateWindow(n,r)}updateWindow(t,n){window.fandomHost=window.fandomHost??{adBlockSuspected:void 0,adBlockReasons:[]},window.fandomHost.adBlockSuspected!=!0&&(window.fandomHost.adBlockSuspected=t),window.fandomHost.adBlockReasons=window.fandomHost.adBlockReasons?[...new Set(window.fandomHost.adBlockReasons.concat(n))]:n,this.adBlockDataPromise.resolve(()=>({adBlockSuspected:window.fandomHost.adBlockSuspected,adBlockReasons:window.fandomHost.adBlockReasons}))}async checkForScriptBlock(t,n){let r;try{await fetch(n,{method:"HEAD"}),r=!1}catch{r=!0}return{suspected:r,reason:`adTechFetch:${t}`}}getAdBlockData(){return this.adBlockDataPromise.promise}}const xn=()=>{try{return window.self!==window.top}catch{return!0}},Bn=["fandom.com","fandom-dev.pl","fandom-dev.us"],Mn=async()=>{const e=Bn.some(t=>window.location.hostname.includes(t));return xn()||!e},$n=()=>Promise.all([Et(),wt()]);class Un{constructor(){f(this,"cmd",[]);f(this,"onReady",$n());const t=$();this.cmd=t.cmd,ke(this),it(t.q,this.executeTracking.bind(this))}executeTracking(t){var r,o;const n=(o=(r=window.fandomTrack)==null?void 0:r.registry)==null?void 0:o[t.event];if(!n||n.length===0){re({message:"Unhandled tracking event",priority:d.P4,data:t});return}n.forEach(i=>this.trackEvent(i,t))}trackEvent(t,n){const r=()=>{t.sampling()&&t(n,hn)};if(!t.requiresConsent)return r();this.onReady.then(r)}registerTracker(t,n,r){Q(t,n,r)}}function Vn(){return(["fandom.com"].find(n=>window.location.hostname.includes(n))?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)??["us"])[0]+"/").replace(/\/+$/,"")}const q=new Map;function Fn(e){var o,i;if(ee("force_tracking"))return!0;const t=q.get(e);if(t!==void 0)return t;const n=(i=(o=window.icbm)==null?void 0:o.config)==null?void 0:i.odysseyPrometheusSenderTrafficLimiter;if((n==null?void 0:n[e])===void 0)return q.set(e,!0),!0;const r=Math.random()*100<n[e];return q.set(e,r),r}function ce(e,t){var o,i;if(!Fn(e))return;const n=[Vn(),"adeng","api","adengine","meter",e].join("/"),r=(((i=(o=window==null?void 0:window.ads)==null?void 0:o.context)==null?void 0:i.platform)||"fandom")+"_odyssey";Ve(`${n}?app=${r}`,t,{errorMessage:"Failed to send adengine metrics"})}function zn({payload:e},t){const n=e.slotName?`_${e.slotName}`:"",r=t??e.type;ce("time",{action:`${r}${n}`,duration:Math.round(e.time)})}const Gn=/\./g;function Fe(e){return e.replace(Gn,"_")}function Hn({event:e,payload:t,alias:n}){const r=n??e,o=t.slotName?`_${t.slotName}`:"",i={action:`${r}${o}`,duration:Math.round(t.time)};ce("time",i),ze(i)}function qn(e){const n={action:Fe(e.name),duration:Math.round(e.duration)};ce("time",n),ze(n)}function ze(e){ne(M,{type:m.PERFORMANCE_MARK,eventName:e.action,time:e.duration})}const Kn={[l.AE_FIRST_LINE_EXEC]:{},[l.AE_AFTER_INIT_PLUGINS]:{},[l.AE_AFTER_GPT_WRAPPER_INIT]:{},[l.AE_AD_ENGINE_INIT]:{},[l.AE_ON_BIDDERS_INIT]:{},[l.AE_AUCTION_START]:{onlyFirstRender:!0,duration:{start:l.AE_FIRST_LINE_EXEC,name:V.AE_DURATION_TO_BID}},[l.AE_CONFIG_CALLBACK_COMPLETE]:{duration:{start:l.AE_CONFIG_CALLBACK_STARTED,name:V.AE_CONFIG_CALLBACK_DURATION}},[l.AE_AUCTION_END]:{onlyFirstRender:!0,duration:{start:l.AE_AUCTION_START,name:V.AE_AUCTION_DURATION}},[l.AE_BEFORE_FIRST_CALL_ADS_REQUEST]:{},[l.AE_GPT_SLOT_REQUESTED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_RESPONSE_RECEIVED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_RENDERED_ENDED_INITIAL]:{slotName:"top_leaderboard"},[l.AE_GPT_SLOT_SLOT_ONLOAD_INITIAL]:{slotName:"top_leaderboard"}};class Wn{constructor(){f(this,"eligiblePerformanceMarks",Kn);f(this,"eligibleEvents",[m.AE_INIT,m.SLOT_REQUESTED,m.SLOT_RENDERED,m.CREATIVE_RENDERED]);f(this,"performanceObserver");this.performanceObserver=this.createPerformanceObserver(),this.startPerformanceObserver(this.performanceObserver),this.registerTrackers()}createPerformanceObserver(){return new window.PerformanceObserver((t,n)=>{this.trackPerformanceMarks(t),this.disconnectPerformanceObserver(n)})}startPerformanceObserver(t){t.observe({type:"mark",buffered:!0})}disconnectPerformanceObserver(t){setTimeout(()=>{t.disconnect()},6e4)}registerTrackers(){$().cmd.push(t=>{t.registerTracker(m.CREATIVE_RENDERED,({payload:n})=>this.trackEvent({event:M,payload:{...n,type:m.CREATIVE_RENDERED}})),t.registerTracker(M,this.trackEvent.bind(this))})}trackEvent(t){this.eligibleEvents.includes(t.payload.type)&&(this.performanceMarkEvent(t),zn(t,this.getAlias(t.payload.type)))}performanceMarkEvent({payload:t}){switch(t.type){case m.AE_INIT:performance.mark(`odyssey_${t.type}`);break;case m.SLOT_REQUESTED:case m.SLOT_RENDERED:performance.mark(`odyssey_${t.slotName}_${t.type}`);break}}getAlias(t){return{[m.AE_INIT]:void 0,[m.SLOT_REQUESTED]:"request",[m.SLOT_RENDERED]:"render",[m.VENDOR_TIME_UPDATE]:void 0,[m.CREATIVE_RENDERED]:void 0,[m.PERFORMANCE_MARK]:void 0}[t]}trackPerformanceMarks(t){t.getEntriesByType("mark").forEach(r=>{if(r){const o=this.transformEligiblePerformanceMark(r);o&&(Hn(o),this.trackDurations(r))}})}trackDurations(t){try{const n=this.eligiblePerformanceMarks[t.name];if(n&&n.duration){const r=this.findMatchingStartMark(n.duration.start,t);if(!r){P({message:`Could not measure performance duration: no matching start mark found for ${t.name}`,priority:d.P3});return}const o=performance.measure(n.duration.name,{start:r.startTime,end:t.startTime});qn(o)}}catch{P({message:"Could not measure performance duration",priority:d.P3})}}findMatchingStartMark(t,n){const r=performance.getEntriesByName(t,"mark");if(r.length)return n.name!=l.AE_AUCTION_END?r[r.length-1]:r.find(o=>{var i,s;return((i=o.detail)==null?void 0:i.auctionId)===((s=n.detail)==null?void 0:s.auctionId)})}transformEligiblePerformanceMark(t){var c;const n=this.eligiblePerformanceMarks[t.name];if(n===void 0||this.abortRefreshMark(n,t))return;const r=Math.round(t.startTime),o=Fe(t.name),i=n.slotName!==void 0,s=i?(c=t.detail)==null?void 0:c.slotId:void 0;if(!(i&&n.slotName!==s))return{event:t.name,payload:{time:r,...i&&{slotName:s}},alias:o}}abortRefreshMark(t,n){var o;if((t==null?void 0:t.onlyFirstRender)!=!0)return!1;const r=(o=n.detail)==null?void 0:o.renderCycleCount;return r?r>1:(re({message:`${n.name} is missing a renderCycleCount`,priority:d.P4}),!0)}}const G=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null));function Ge(e){var t,n,r;return((t=window.fandomCmp)==null?void 0:t.ready)===!0&&((n=window.fandomCmp)==null?void 0:n.allowed.ads)===!0&&((r=window.fandomCmp)==null?void 0:r.consentApi)===e}function He(){var e;return Ge("tcf")?((e=window.fandomCmp)==null?void 0:e.optOut)===!1?O.YES:O.NO:O.NOT_APPLICABLE}function qe(){var e;return Ge("usp")?((e=window.fandomCmp)==null?void 0:e.optOut)===!0?O.YES:O.NO:O.NOT_APPLICABLE}function Ke(){var e,t,n;return((n=(t=(e=window.ads)==null?void 0:e.context)==null?void 0:t.targeting)==null?void 0:n.wikiVertical)??"unknown"}async function jn(e,t){var c,a,u,g,E;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:We(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:U(),country:r.country,region:r.region,lang:h(),slot_id:Ye(e,t),slot_size:"",kv_pos:e.slotName,kv_rv:Je(e),kv_s0v:Ke(),kv_s1:`_${b()}`,kv_s2:$e(),kv_skin:p(),ppid:Me(),page_width:window.document.body.scrollWidth.toString(),viewport_height:Qe(window.innerHeight),rollout_tracking:je(),opt_in:He(),is_uap:0,opt_out_sale:qe(),session_id:v(),pv_number:A(),pv_number_global:N(),pv_unique_id:_(),beacon:S(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:I(),a:R(),n:-1,exp_bucket:w(),browser:ae(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s}}async function Qn(e,t){var c,a,u,g,E;const n=new Date,r=window.fandomHost.geo,o=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),i=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,s=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0;return{ad_status:We(e.type),timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),device:U(),country:r.country,region:r.region,lang:h(),advertiser_id:Jn(e),creative_id:Xn(e),product_lineitem_id:Zn(e),order_id:er(e),slot_id:Ye(e,t),slot_size:tr(e),kv_pos:e.slotName,kv_rv:Je(e),kv_s0v:Ke(),kv_s1:`_${b()}`,kv_s2:$e(),kv_skin:p(),ppid:Me(),page_width:window.document.body.scrollWidth.toString(),viewport_height:Qe(window.innerHeight),rollout_tracking:je(),opt_in:He(),is_uap:0,opt_out_sale:qe(),session_id:v(),pv_number:A(),pv_number_global:N(),pv_unique_id:_(),beacon:S(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:I(),a:R(),n:-1,exp_bucket:w(),browser:ae(),odyssey_version:((E=window.fandomAds)==null?void 0:E.version)??"unknown",proxy_page_suspected:o,ad_block_suspected:i,ad_block_reasons:s}}const Yn=e=>async(t,n)=>{let r;ot(t.payload)?r=await jn(t.payload,e):r=await Qn(t.payload,e),n(t.event,G(r))};function We(e){return e.toString().replace("_info","")}function je(){return window.OneTrust!==void 0?"1T":"toi"}function Qe(e){return e??0}function Jn(e){var t;return`${((t=e.slotInfo)==null?void 0:t.advertiserId)??""}`}function Xn(e){var t;return`${((t=e.slotInfo)==null?void 0:t.creativeId)??""}`}function Zn(e){var t;return`${((t=e.slotInfo)==null?void 0:t.lineItemId)??""}`}function er(e){var t;return`${((t=e.slotInfo)==null?void 0:t.orderId)??""}`}function Ye(e,t){const n=e.slotName??"unknown";return t.getUid(n)}function tr(e){var t,n;return(t=e.slotInfo)!=null&&t.selectedSize?e.slotInfo.selectedSize:(n=e.slotInfo)!=null&&n.configuredSizes?e.slotInfo.configuredSizes.join(","):""}function Je(e){return e.rv??-1}const nr={[m.AE_INIT]:{type:"load_times",beaconEventName:"load_time_init"},[m.SLOT_REQUESTED]:{type:"load_times",beaconEventName:"requested"},[m.SLOT_RENDERED]:{type:"load_times",beaconEventName:"loaded"}},fe=async({event:e,payload:t},n)=>{var g,E,L,x,C;const r=new Date,o=window.fandomHost.geo,i=await((g=window.fandomHost)==null?void 0:g.proxyPageSuspected),s=nr[t.type],c=(E=window.fandomHost)==null?void 0:E.adBlockSuspected,a=(x=(L=window.fandomHost)==null?void 0:L.adBlockReasons)!=null&&x.length?window.fandomHost.adBlockReasons.join(";"):void 0,u={event_name:rr(t,s),browser_ts:r.getTime(),load_time:Math.round(t.time),tz_offset:r.getTimezoneOffset(),country:o.country,session_id:v(),pv_unique_id:_(),c:T(),s:p(),exp_bucket:w(),proxy_page_suspected:i,odyssey_version:((C=window.fandomAds)==null?void 0:C.version)??"unknown",ad_block_suspected:c,ad_block_reasons:a};n(e,G(u))};function rr(e,t){return`${e.slotName?`${e.slotName}_`:""}${(t==null?void 0:t.beaconEventName)??e.eventName??e.type}`}function or(e,t,n,r,o){var i;return{status:sr(e),name:ar(e),rv:lr(e),auction_id:e.bidInfo.auctionId??"",rejection_reason:e.bidInfo.rejectionReason??"",odyssey_version:((i=window.fandomAds)==null?void 0:i.version)??"unknown",response_time:ur(e),size:cr(e),price:dr(e),additional_flags:mr(e),slot_id:t.getUid(e.slotName),pos:e.baseSlotName,pv_number:A(),pv_number_global:N(),pv_unique_id:_(),c:T(),s:p(),exp_bucket:w(),proxy_page_suspected:n,ad_block_suspected:r,ad_block_reasons:o,full_auction:fr(e)}}const ir=e=>async({payload:t},n)=>{var c,a,u,g;const r=await((c=window.fandomHost)==null?void 0:c.proxyPageSuspected),o=(a=window.fandomHost)==null?void 0:a.adBlockSuspected,i=(g=(u=window.fandomHost)==null?void 0:u.adBlockReasons)!=null&&g.length?window.fandomHost.adBlockReasons.join(";"):void 0,s=or(t,e,r,o,i);n("adengbidders",G(s))};function sr(e){var t,n,r;return(t=e.bidInfo)!=null&&t.status?e.bidInfo.status:((n=e.bidInfo)==null?void 0:n.timedOut)===!0?"timedout":((r=e.bidInfo)==null?void 0:r.timedOut)===!1?"on_time":"unknown"}function ar(e){var t;return((t=e.bidInfo)==null?void 0:t.bidderName)??"unknown"}function cr(e){var t;return((t=e.bidInfo)==null?void 0:t.size)??"unknown"}function dr(e){var t;return((t=e.bidInfo)==null?void 0:t.price)??"unknown"}function ur(e){var t;return((t=e.bidInfo)==null?void 0:t.timeToRespond)??0}function gr(e){var t,n,r;(t=e==null?void 0:e.bidInfo)!=null&&t.buyerId&&((r=e.flags)==null||r.push(`buyer_id=${(n=e.bidInfo)==null?void 0:n.buyerId}`))}function mr(e){return e.flags=[],gr(e),(e.flags??[]).join(";")}function lr(e){return e.rv??-1}function fr(e){var t;return((t=e.bidInfo)==null?void 0:t.fullAuction)===!0?"yes":"no"}const Xe="error",_r=e=>({event:t,payload:n},r)=>{const o=window.fandomHost.geo,i=K(n),s={slot_size:Sr(n),real_ad_size:br(i),requested_sizes:Ir(n),slot_id:e.getUid(K(n)),position:K(n),country_code:o.country,region:o.region,rv:Ar(n),...pr(n),session_id:v(),pv_number:A(),pv_number_global:N(),pv_unique_id:_(),beacon:S(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:I(),a:R(),n:-1,exp_bucket:w()};r(t,s)};function pr(e){const t=e.slotInfo??{};return{advertiser_id:`${t.advertiserId??""}`,creative_id:`${t.creativeId??""}`,line_item_id:`${t.lineItemId??""}`,order_id:`${t.orderId??""}`}}function wr(e){return Er(e)??vr(e)}function Er(e){const t=hr(e);if(!t)return;const{offsetHeight:n,offsetWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function hr(e){var t,n,r;return(r=(n=(t=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] iframe`))==null?void 0:t.contentWindow)==null?void 0:n.document)==null?void 0:r.querySelector("html")}function vr(e){var o;const t=(o=document.querySelector(`#${e} [id*='google_ads_iframe_\\/5441'] div`))==null?void 0:o.firstElementChild;if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function Tr(e){const t=document.getElementById(e);return{width:(t==null?void 0:t.offsetWidth)??0,height:(t==null?void 0:t.offsetHeight)??0}}function kr(e){const t=document.querySelector(`#${e} iframe`);if(!t)return;const{clientHeight:n,clientWidth:r}=t;return n&&r?{height:n,width:r}:void 0}function br(e){const t=CSS.escape(e),{width:n,height:r}=kr(t)??wr(t)??Tr(t);return!n||!r?"unknown":`${n}x${r}`}function Sr(e){var t,n;return((t=e.slotInfo)==null?void 0:t.selectedSize)===null?"unknown":(n=e.slotInfo)!=null&&n.selectedSize?e.slotInfo.selectedSize:Xe}function Ir(e){try{const t=e.slotInfo.parsedSizes.join(",");return t===""?"unknown":t}catch{return Xe}}function K(e){return e.slotName??"unknown"}function Ar(e){return e.rv??-1}const Nr=async({payload:e},t)=>{var s;const n=new Date,r=await ye(y);if(Rr(e)==="")return;const i={timestamp:n.getTime(),tz_offset:n.getTimezoneOffset(),prop_value:((s=e.flags)==null?void 0:s.join(";"))??"",country:r.country,session_id:v(),pv_number:A(),pv_number_global:N(),pv_unique_id:_(),beacon:S(),c:T(),x:b(),lc:h(),s:p(),ua:window.navigator.userAgent,u:I(),a:R(),n:-1,exp_bucket:w()};t("adenglabradorinfo",i)};function Rr(e){var t;return((t=e.flags)==null?void 0:t.join(";"))??""}const Cr=({event:e=X.TRACKING_EVENT,payload:t},n)=>{const r={...t,url:document.URL,session_id:v(),pv_number:A(),pv_number_global:N(),pv_unique_id:_(),beacon:S(),c:T(),x:b(),lc:h(),s:Ze(),ua:window.navigator.userAgent,u:I(),a:R(),n:-1,exp_bucket:w()};n(e,r)};function Ze(){return`ucp_${U()==="smartphone"?"mobile":"desktop"}`}const Or=({payload:e},t)=>{const n={partner_name:e.partnerName,partner_identity_id:e.partnerIdentityId,pv_unique_id:_(),session_id:v(),beacon:S(),ua:window.navigator.userAgent,s:Ze()};t("identityinfo",n)},yr=({payload:e},t)=>{const n=new Date,r={tag_name:e.tagName,event_name:e.eventName,event_details:e.eventDetails,start_time:e.startTime,monetization_tier:an(),wiki_vars:e.wikiVars,env:e.env,software_version:e.softwareVersion,exp_data:e.expData,c:T(),n:se(),a:R(),s:p(),beacon:S(),session_id:v(),pv_unique_id:_(),pv_number:A(),pv_number_global:N(),exp_bucket:w(),browser_ts:n.getTime(),tz_offset:n.getTimezoneOffset(),u:I(),x:b(),lc:h(),ua:window.navigator.userAgent};t("component_performance",r)},Pr=async({payload:e},t)=>{var r;const n={...Dr(e),...await Lr(),...xr(),...Br(),...Mr(),browser:ae(),odyssey_version:((r=window.fandomAds)==null?void 0:r.version)??"unknown"};t("adengpagestatus",G(n))};function Dr(e){return{event_trigger:e.eventTrigger,deployment_environment:e.deploymentEnvironment,monetization_status:e.monetizationStatus,monetization_reasons:e.monetizationReasons.join(";"),monetization_tier:e.monetizationTier??void 0,p1_error_count:e.errors.p1,p2_error_count:e.errors.p2,p3_error_count:e.errors.p3,p4_error_count:e.errors.p4,p1_degradation_count:e.degradations.p1,p2_degradation_count:e.degradations.p2,p3_degradation_count:e.degradations.p3,p4_degradation_count:e.degradations.p4,status_first_auction_timed_out:e.statusChecks.firstAuctionTimedOut??void 0,status_helix_targeting_included:e.statusChecks.helixTargetingIncluded??void 0}}async function Lr(){var i,s,c;const[e,t]=await Promise.all([(i=window.fandomHost)==null?void 0:i.adBlockData,(s=window.fandomHost)==null?void 0:s.proxyPageSuspected]),n=e==null?void 0:e(),r=(c=n==null?void 0:n.adBlockReasons)==null?void 0:c.join(";"),o={ad_block_suspected:n==null?void 0:n.adBlockSuspected,proxy_page_suspected:t};return r&&(o.ad_block_reasons=r),o}function xr(){return{pv_number:A(),pv_number_global:N(),pv_unique_id:_()}}function Br(){return{c:T(),x:b(),lc:h(),s:p(),a:R()}}function Mr(){return{session_id:v(),beacon:S(),ua:window.navigator.userAgent,u:I(),n:-1,exp_bucket:w()}}class $r{constructor(t={}){this.map=t}generateUidForSlot(t){this.map[t]=crypto.randomUUID()}getUid(t){return this.map[t]!==void 0?this.map[t]:(this.generateUidForSlot(t),this.getUid(t))}}function Ur(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}async function Vr({payload:e},t){const n=new Date,r={"wiki-article":"wa",widget:"wg"},o=Ur(e.recommendations,10),i={event_name:e.eventName,env:e.env,sft_v:e.softwareVersion,exp_d:e.expData,act:e.action,cat:e.category,cmp:e.component,trk_m:e.trackingMethod,b2:e.b2,c_id:e.contextContentId,c_t:e.contextContentType,c_sp:e.contextSpecialPage,w_id:e.widgetId,wl_id:e.widgetLocationId,w_cnt:e.widgetContent,w_lyt:e.widgetLayout,c:T(),n:se(),a:R(),s:p(),beacon:S(),session_id:v(),pv_unique_id:_(),pv_number:A(),pv_number_global:N(),exp_bucket:w(),b_ts:n.getTime(),tz_o:n.getTimezoneOffset(),u:I(),x:b(),lc:h(),ua:window.navigator.userAgent};await Promise.all(o.map(s=>{const a=s.map(g=>`${g.id}|${r[g.type]??g.type}|${g.position??""}`).join(","),u={...i,recs:a};return t("recommendation",u)}))}const F=100;function Fr(e){var n,r;if(e==="adengbidders"||ee("force_tracking"))return F;const t=(r=(n=window.icbm)==null?void 0:n.config)==null?void 0:r.odysseyBeaconSenderTrafficLimiter;return(t==null?void 0:t[e])===void 0?F:t[e]}const k=e=>{const t=Fr(e);return t===F?{}:{sampling:vn(t)}},zr=()=>{const e=new $r;$().cmd.push(t=>{t.registerTracker(nt,Yn(e),k("adengadinfo")),t.registerTracker(_e.BIDDER_RESPONSE,ir(e),k("adengbidders"));const n=k("adengloadtimes");t.registerTracker(m.CREATIVE_RENDERED,({payload:r},o)=>fe({event:M,payload:{...r,type:m.CREATIVE_RENDERED}},o),n),t.registerTracker(M,fe,n),t.registerTracker(rt,_r(e),k("adengadsizeinfo")),t.registerTracker(we.LABRADOR_KEYVALUES,Nr,k("adenglabradorinfo")),t.registerTracker(pe.IDENTITY_INFO,Or,k("identityinfo")),t.registerTracker(X.TRACKING_EVENT,Cr,k("trackingevent")),t.registerTracker(he.COMPONENT_PERFORMANCE_EVENT,yr,k("component_performance")),t.registerTracker(ve.RECOMMENDATION_EVENT,Vr,k("recommendation")),t.registerTracker(J.ADENGPAGESTATUS,Pr,k("adengpagestatus"))})};(async()=>{var s;const e=((s=window.ads)==null?void 0:s.context.platform)??"app",t=U(),n=await ye(y),r=Oe();window.icbm=await en(e,t,n),window.dispatchEvent(new Event("instantConfigLoaded")),Ot(y,n);const o=new Ln,i=new Y({});window.fandomHost={...window.fandomHost??{},app:e,device:t,icbm:window.icbm,geo:n,version:kn(),adBlockManager:o,adBlockData:o.getAdBlockData(),issueManager:i,browser:r,proxyPageSuspected:Mn(),reset:()=>{i.reset()}},new Wn,zr(),Tn(),new Un,ke(window.fandomHost)})();
//# sourceMappingURL=main.js.map
